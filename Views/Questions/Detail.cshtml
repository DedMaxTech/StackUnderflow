@model Question;
@using Westwind.AspNetCore.Markdown

<div  style="display:flex">
    <div class="votes">
        <a class="@(Auth.User?.Votes.FirstOrDefault(v=>v.QuestionId==Model.Id && v.IsUp)!=null?"outline":"")" asp-controller="Questions" asp-action="Vote" asp-route-name="@Model.Title" asp-route-vote="up">👍</a>
        <b class="reputation mr5">@Model.Rating</b>
        <a class="@(Auth.User?.Votes.FirstOrDefault(v=>v.QuestionId==Model.Id && !v.IsUp)!=null?"outline":"")" asp-controller="Questions" asp-action="Vote" asp-route-name="@Model.Title" asp-route-vote="down">👎</a>
    </div>
    <div class="gray-border" style="width: 100%;">
        <h1>@Model.Title</h1>
        <div>@Markdown.ParseHtmlString(Model.Body)</div>
        <div class="v-align" style="justify-content: end">
            <div style="font-size:0.8em">Asked @Model.Timestamp</div>
            <div>@await Html.PartialAsync("User", Model.Author)</div>
        </div>
    </div>
</div>

<h2>@Model.Answers.Count Answers</h2>

<div class="gray-border">
    @foreach(var a in Model.Answers)
    {
        <div class="question">
            <div class="votes">
                <a class="@(Auth.User?.Votes.FirstOrDefault(v=>v.AnswerId==a.Id && v.IsUp)!=null?"outline":"")" asp-controller="Questions" asp-action="VoteAnswer" asp-route-name="@Model.Title" asp-route-answerId="@a.Id" asp-route-vote="up">👍</a>
                <b class="reputation mr5">@a.Rating</b>
                <a class="@(Auth.User?.Votes.FirstOrDefault(v=>v.AnswerId==a.Id && !v.IsUp)!=null?"outline":"")" asp-controller="Questions" asp-action="VoteAnswer" asp-route-name="@Model.Title" asp-route-answerId="@a.Id" asp-route-vote="down">👎</a>
            </div>
            <div style="width: 100%;">
                <div>@Markdown.ParseHtmlString(a.Body)</div>
                <div class="v-align" style="justify-content: end">
                    <div style="font-size:0.8em">Answered @a.Timestamp</div>
                    <div>@await Html.PartialAsync("User", a.Author)</div>
                </div>
            </div>
        </div>
    }
</div>

<a class="button" asp-controller="Questions" asp-action="NewAnswer" asp-route-name="@Model.Title">Answer</a>

<script>hljs.highlightAll();</script>